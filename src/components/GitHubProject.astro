---
const { name, description, repo } = Astro.props

let starCount: number | null = null

try {
  const response = await fetch(`https://api.github.com/repos/${repo}`, {
    headers: { 'User-Agent': 'jasonlong.me' }
  })
  if (response.ok) {
    const data = await response.json()
    starCount = data.stargazers_count
  }
} catch {
  // Fetch failed, show without stars
}
---

<a href=`https://github.com/${repo}`>{name}</a>: {description}{starCount && ` (â­‘${new Intl.NumberFormat().format(starCount)})`}
